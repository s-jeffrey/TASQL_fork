"```sql\nSELECT COUNT(DISTINCT y.CustomerID)\nFROM yearmonth y\nJOIN customers c ON y.CustomerID = c.CustomerID\nWHERE c.Segment = 'KAM'\n  AND y.Consumption < 30000\n  AND y.Date BETWEEN '201201' AND '201212';\n```\n\nThis SQL query counts the number of distinct customers in the \"KAM\" segment who had a consumption of less than 30,000 for the year 2012. It uses the `yearmonth` table to filter by consumption and date, and joins with the `customers` table to filter by the customer segment."